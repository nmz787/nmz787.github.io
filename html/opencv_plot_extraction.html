
    <!DOCTYPE html>
    <html class="fuelux" lang="en">
      <head>
        <meta charset="utf-8">
        <title>Nathan McCorkle</title>
        <!-- styles -->
        <link href="http://fuelcdn.com/fuelux/2.2/css/fuelux.css" rel="stylesheet" />
        <link href="http://fuelcdn.com/fuelux/2.2/css/fuelux-responsive.css" rel="stylesheet" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
        <script src="http://fuelcdn.com/fuelux/2.2/loader.min.js" type="text/javascript"></script>
        <link href="../css/docs.css" rel="stylesheet">
      </head>
  <body data-spy="scroll" data-target=".subnav" data-offset="50">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://nmz787.github.com">nmz787's blog</a>
          <div class="nav-collapse">
            <ul class="nav">          
              <li class="">
                <a href="http://nmz787.github.com"><i class="icon-home"></i> Home</a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-comment"></i> Social <b class="caret"></b></a>
                <ul class="dropdown-menu">                                      
                    <li class=""><a href="http://www.twitter.com/norklemcdorkle" rel="tooltip" title="Go to twitter.com/nmz787" target="_blank">Twitter</a></li>
                    <li class=""><a href="http://github.com/nmz787" rel="tooltip" title="Go to github.com/nmz787" target="_blank">GitHub</a></li>
                    <li class=""><a href="http://www.linkedin.com/pub/nathan-mccorkle/9/98a/713" rel="tooltip" title="Go to LinkedIn profile" target="_blank">LinkedIn</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-list"></i> Projects <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li class=""><a href="https://www.takeitapart.com/" rel="tooltip" title="Go to takeitapart.com" target="_blank">Take It Apart</a></li>
                        <li class=""><a href="https://github.com/nmz787/open-spectrometer" rel="tooltip" title="Go to open-spectrometer on GitHub" target="_blank">open-spectrometer</a></li>
                        <li class=""><a href="http://hackaday.io/project/1342-open-spectrometer" rel="tooltip" title="Go to open-spectrometer on hackaday.io" target="_blank">open-spectrometer (hackaday)</a></li>
                        <li class=""><a href="https://github.com/nmz787/rs232-sniffer" rel="tooltip" title="Go to rs232-sniffer on GitHub" target="_blank">rs232-sniffer</a></li>
                        <li class=""><a href="https://github.com/nmz787/microfluidic-cad" rel="tooltip" title="Go to microfluidic-cad on GitHub" target="_blank">microfluidic-cad</a></li>
                    </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-list"></i> Code Snippets <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li class=""><a href="http://nmz787.github.com/fooplot.html" rel="tooltip" title="Go to fooplot">Fooplot test</a></li>
                        <li class=""><a href="https://gist.github.com/nmz787" rel="tooltip" title="GitHub short code snippets">My GitHub gists</a></li>
                        <li class=""><a href="../html/about_this_blog.html" rel="tooltip" title="How and why this exists">About this blog</a></li>
                    </ul>
              </li>
            </ul>       
          </div>
        </div>
      </div>
    </div>
    <div class="container"> 
      <div class="marketing">
        <div class="content">
          <!--div class="row"-->
            <!--div class="span9 column"-->
              <!--hr-->
            <!--/div-->
          <!--/div-->
          <div class="row">   
            <div class="span9 columns">
<h1>Using Python and openCV to extract and manipulate plot lines</h1>
<p>Someone on the PLOTS-spectrometry mailing list posted two spectrographs they'd collected with their PLOTS-spectrometer, and also a plot the LED manufacturer provided.<br />
The wondered why their spectrogram didn't look like either of the two plots provided by the manufacturer, and I thought they might look similar if the plot lines were added or multiplied with each other.<br />
So I made this script to select the plot line color, then extract colors close to that into separate images.<br />
With these images, the maximum Y value for each column was found, and Y values from the corresponding plots were added and also multiplied, then saved to new output images.</p>
<h2>LED spectrograms in question</h2>
<p><img alt="Input dual-line plot" src="../img/Cree_A19_warm_2700k.JPG" /> </p>
<p><img alt="Input dual-line plot" src="../img/Cree_A19_daylight_5000k.JPG" /><br />
&nbsp;<br />
&nbsp;  </p>
<h2>Using this dual-line graph as input</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/two_line_plot_cropped.png" /><br />
&nbsp;  </p>
<h2>These binary images were extracted of the individual plot lines</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/two_line_out/two_line_plot_cropped_extracted_0.png" />  </p>
<p><img alt="openCV image" src="../img/opencv_combine_plot/two_line_out/two_line_plot_cropped_extracted_1.png" />  </p>
<h2>Plots' Y-values added together</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/two_line_out/two_line_plot_cropped_added.png" />  </p>
<h2>Added, then divided by 2</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/two_line_out/two_line_plot_cropped_added_scaled.png" />  </p>
<h2>Square root of the multiples ( sqrt(y1 * y2) )</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/two_line_out/two_line_plot_cropped_multiplied.png" />  </p>
<h2>Graph of added (yellow) and multiplied (red) lines, both were scaled down.</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/two_line_out/two_line_plot_cropped_multiplied_plus_added.png" title="blog_thumbnail" />  </p>
<p>&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;  </p>
<h2>Using this triple-line graph image as input</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_plot_cropped.png" />  </p>
<h2>The results from processing:</h2>
<h2>Binary images of extracted plots</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_out/triple_line_plot_cropped_extracted_0.png" />  </p>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_out/triple_line_plot_cropped_extracted_1.png" />  </p>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_out/triple_line_plot_cropped_extracted_2.png" />  </p>
<h2>Added</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_out/triple_line_plot_cropped_added.png" />  </p>
<h2>Added then divided by 3</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_out/triple_line_plot_cropped_added_scaled.png" />  </p>
<h2>Cube root of the multiples ( cube_root(y1 * y2 * y3) )</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_out/triple_line_plot_cropped_multiplied.png" />  </p>
<h2>Graph of added (yellow) and multiplied (red) lines, both were scaled down.</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_out/triple_line_plot_cropped_multiplied_plus_added.png" />  </p>
<p>&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;  </p>
<h2>So to sum things up, these were in question</h2>
<p><img alt="Input dual-line plot" src="../img/Cree_A19_warm_2700k.JPG" /> </p>
<p><img alt="Input dual-line plot" src="../img/Cree_A19_daylight_5000k.JPG" />  </p>
<p>&nbsp;<br />
&nbsp;  </p>
<h2>And what I thought might have looked similar after some computation.</h2>
<p><img alt="openCV image" src="../img/opencv_combine_plot/two_line_out/two_line_plot_cropped_multiplied_plus_added.png" title="blog_thumbnail" />  </p>
<p><img alt="openCV image" src="../img/opencv_combine_plot/triple_line_out/triple_line_plot_cropped_multiplied_plus_added.png" />  </p>
<p>&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;  </p>
<h2>What do you think? Leave me some <a href="https://github.com/nmz787/Feedback/issues/new">Feedback</a></h2>
<p>&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;<br />
&nbsp;  </p>
<h2>Check out the code I wrote to do this <a href="https://github.com/nmz787/opencv-snippets/blob/master/python/combine_plot.py">here</a></h2>
            </div>
          </div>
        </div>
      </div>
    </div>

        <footer class="footer">
          <div>
            <p class="pull-right">  |  <a href="#">Back to top</a>  |       </p>
            <p>Page last modified on January 03, 2015</p>
            <p>If need be, <a href="https://github.com/nmz787/Feedback/issues/new" title="Leave feedback for Nathan"  target="_blank" >leave me some feedback</a>.</p>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
          </div>
        </footer>
      </body>
    </html>
    